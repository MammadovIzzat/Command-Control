aW1wb3J0IHNvY2tldAppbXBvcnQgb3MKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IGdldHBhc3MK
ZnJvbSBmdHBsaWIgaW1wb3J0IEZUUAppbXBvcnQgdGltZQoKSE9TVCA9ICIxOTIuMTY4LjMwLjUy
IgpQT1JUID0gNjU2NQpmdHBfdXNlcm5hbWUgPSAiTmVjYXRpIgpmdHBfcGFzc3dvcmQgPSAiUDtG
M25qK3FYcC5OXkg4ISo9JCNrbCIKCgpkZWYgaW5mbyhmLGNsaWVudCk6CiAgICBmZiA9IGYiXDAz
M1szMm17Zn1cMDMzWzBtXG4iCiAgICBjbGllbnQuc2VuZChmZi5lbmNvZGUoJ3V0Zi04JykpCgoK
CmRlZiBmaXJzdF9jb25uZWN0KGNsaWVudCk6CiAgICBjbGllbnQuc2VuZChzb2NrZXQuZ2V0aG9z
dG5hbWUoKS5lbmNvZGUoJ3V0Zi04JykpCiAgICBhbnN3ZXIgPSBjbGllbnQucmVjdigxMDI0KS5k
ZWNvZGUoInV0Zi04IikKICAgIGlmIGFuc3dlciA9PSAid2hvYXJleW91IjoKICAgICAgICBjbGll
bnQuc2VuZChnZXRwYXNzLmdldHVzZXIoKS5lbmNvZGUoInV0Zi04IikpCgoKZGVmIGNvbm5lY3Qo
KToKICAgIHdoaWxlIDE6CiAgICAgICAgcHdkID0gb3MuZ2V0Y3dkKCkKICAgICAgICBjbGllbnQu
c2VuZChwd2QuZW5jb2RlKCd1dGYtOCcpKQogICAgICAgIHJlc3BvbnNlID0gY2xpZW50LnJlY3Yo
NDA5NjApCiAgICAgICAgY29tbWFuZCA9IHJlc3BvbnNlLmRlY29kZSgndXRmLTgnKQogICAgICAg
IHRyeToKICAgICAgICAgICAgaWYgY29tbWFuZC5zcGxpdCgiICIpWzBdID09ICJjZCI6CiAgICAg
ICAgICAgICAgICBvcy5jaGRpcihjb21tYW5kLnNwbGl0KCIgIilbMV0pCiAgICAgICAgICAgIGVs
aWYgY29tbWFuZCA9PSAnY2xvc2UnOgogICAgICAgICAgICAgICAgaW5mbygiWypdIENvbm5lY3Rp
b24gY2xvc2VkICEhISIsY2xpZW50KQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAg
ZWxpZiBjb21tYW5kLnNwbGl0KCIgIilbMF0gPT0gImZ0cCI6CiAgICAgICAgICAgICAgICAKICAg
ICAgICAgICAgICAgIHN0ZG91dCA9IGZ0cF9jb25uZWN0KGNvbW1hbmQpCiAgICAgICAgICAgICAg
ICBpbmZvKHN0ZG91dCxjbGllbnQpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAg
ICBzdGRvdXQgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChbInBvd2Vyc2hlbGwiLCAiLUNvbW1h
bmQiLGNvbW1hbmRdKQogICAgICAgIGV4Y2VwdCA6CiAgICAgICAgICAgIHN0ZG91dCA9IGIiXDAz
M1szMm1bKl0gQ29tbWFuZCBOb3QgRm91bmQuXDAzM1swbVxuIgogICAgICAgICAgICAKICAgICAg
ICBpZiBzdGRvdXQ6CiAgICAgICAgICAgIGNsaWVudC5zZW5kKHN0ZG91dCkKICAgICAgICBlbHNl
OgogICAgICAgICAgICBjbGllbnQuc2VuZChiIlxuIikKICAgICAgICB0aW1lLnNsZWVwKDAuMykK
CgoKZGVmIGZ0cF9jb25uZWN0KGNvbW1hbmQpOgogICAgdHJ5OgogICAgICAgIGNvbW1hbmRfcGFy
dHMgPSBjb21tYW5kLnNwbGl0KCkKICAgICAgICBjb21tYW5kX3R5cGUgPSBjb21tYW5kX3BhcnRz
WzFdCiAgICAgICAgZmlsZW5hbWUgPSBjb21tYW5kX3BhcnRzWzJdCiAgICAgICAgc2Vzc2lvbiA9
IEZUUCgpCiAgICAgICAgc2Vzc2lvbi5jb25uZWN0KEhPU1QpCiAgICAgICAgc2Vzc2lvbi5sb2dp
bih1c2VyPWZ0cF91c2VybmFtZSwgcGFzc3dkPWZ0cF9wYXNzd29yZCkKICAgICAgICAKICAgICAg
ICBpZiBjb21tYW5kX3R5cGUgPT0gIi1kIjoKICAgICAgICAgICAgIyBVcGxvYWQgZmlsZQogICAg
ICAgICAgICB3aXRoIG9wZW4oZmlsZW5hbWUsICdyYicpIGFzIGY6CiAgICAgICAgICAgICAgICBz
ZXNzaW9uLnN0b3JiaW5hcnkoZidTVE9SIHtmaWxlbmFtZX0nLCBmKQogICAgICAgICAgICByZXR1
cm4gZiJbKl0ge2ZpbGVuYW1lfSBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgICAgICAg
IAogICAgICAgIGVsaWYgY29tbWFuZF90eXBlID09ICItdSI6CiAgICAgICAgICAgICMgRG93bmxv
YWQgZmlsZQogICAgICAgICAgICB3aXRoIG9wZW4oZmlsZW5hbWUsICd3YicpIGFzIGY6CiAgICAg
ICAgICAgICAgICBzZXNzaW9uLnJldHJiaW5hcnkoZidSRVRSIHtmaWxlbmFtZX0nLCBmLndyaXRl
KQogICAgICAgICAgICByZXR1cm4gZiJbKl0ge2ZpbGVuYW1lfSAgdXBsb2FkZWQgc3VjY2Vzc2Z1
bGx5LiIKICAgICAgICAgICAgCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuICJbKl0g
SW52YWxpZCBvcHRpb24gISEhIgogICAgICAgICAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9u
IGFzIGU6CiAgICAgICAgcmV0dXJuIGYiRXJyb3I6IHtlfSIKCgoKCgpjbGllbnQgPSBzb2NrZXQu
c29ja2V0KHNvY2tldC5BRl9JTkVULHNvY2tldC5TT0NLX1NUUkVBTSkKY2xpZW50LmNvbm5lY3Qo
KEhPU1QsUE9SVCkpCmZpcnN0X2Nvbm5lY3QoY2xpZW50KQp3aGlsZSAxOgogICAgY29tbWFuZCA9
IGNsaWVudC5yZWN2KDQwOTYwKS5kZWNvZGUoInV0Zi04IikKICAgIG1hdGNoIGNvbW1hbmQ6CiAg
ICAgICAgICAgIGNhc2UgImNvbm5lY3QiOgogICAgICAgICAgICAgICAgY29ubmVjdCgpCiAgICAg
ICAgICAgIGNhc2UgImV4aXQiOgogICAgICAgICAgICAgICAgY2xpZW50LmNsb3NlKCkKICAgICAg
ICAgICAgICAgIGJyZWFrCgo=
